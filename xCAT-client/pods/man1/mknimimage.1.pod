=head1 NAME
 
B<mknimimage> - Use this xCAT command to create AIX image definitions. 

=head1 SYNOPSIS

B<mknimimage [-h | --help ]>

B<mknimimage [-V] [-f|--force] [-l location] [-s image_source] [-i current_image] [-t nimtype] osimage_name [attr=val [attr=val ...]]>

=head1 DESCRIPTION

This command may be used to create an AIX image.  It will create both an xCAT osimage definition and the corresponding NIM resource definitions. 

If a "-s image_source" is provided then new NIM resources are created.

If a "-i current_image" is provided then all the resources from the "current_image" will be used in the new osimage definition except the SPOT resource.  A new SPOT resource will be created by copying the one specified in the "current_image" and the name used for the new SPOT will be the same as the new osimage name.

The naming convention for the NIM SPOT resource definition is to use the same name as the xCAT osimage.

To list the contents of the xCAT osimage definition use the xCAT lsdef command ("lsdef -t osimage -l -o <osimage_name>").

To change the xCAT osimage definition you can use the xCAT chdef command.

To remove an xCAT osimage definition along with the associated NIM resource definitions use the rmdsklsimage command.

To list a NIM resource definition use the AIX lsnim command ("lsnim -l <resource_name>").

To remove specific NIM resource definitons use the AIX nim command.

=head1 OPTIONS

=over 10

=item B<attr=val [attr=val ...]>

Specifies one or more "attribute equals value" pairs, separated by spaces. Attr=val pairs must be specified last on the command line. These are used to specify additional or different resource names to use when creating the the xCAT osimage definition. The naming convention is: "<nim_resource_type>=<resource_name>". (ex. "root=myrootres")

=item B<-f|--force>

Use the force option to re-create xCAT osimage definition. This option removes the old definition before creating the new one. It does not remove any of the NIM resource definitions named in the osimage definition.  Use the rmnimimage command to remove the NIM resources associated with an xCAT osimage definition.

=item B<-h |--help>

Display usage message.

=item B<image_name>

The name of the xCAT osimage definition to create.  This will be used as the name of the xCAT osimage definition as well as the name of the NIM SPOT(COSI) resource.

=item B<-i current_image>

The name of an existing xCAT osimage that should be copied to make a new xCAT osimage definition. The new definition will contain the same resources as the current_image except for the SPOT, which will be copied and given the new name. 

=item B<-l location>

The directory location to use when creating new NIM resources. The default location is /install/nim (recommended).

=item B<-s image_source>

The source of software to use when creating the new NIM lpp_source resource. This could be a source directory, (ex. /dev/cd0), or a previously defined lpp_source resource name. This option causes new NIM resources to be created and added to the xCAT osimage definition.

=item B<-t nimtype>

Used to specify the NIM machine type. The possible values are "standalone", "diskless" or "dataless".  The default is "standalone".

=item B<-V |--verbose>

Verbose mode.

=back

=head1 RETURN VALUE

=over 3

=item 0 

The command completed successfully.

=item 1 

An error has occurred.

=back

=head1 EXAMPLES


1) Create a diskless image called 61cosi using the AIX product media.

B<mknimimage -t diskless -s /dev/cd0 61cosi>

2) Create a new diskless image by copying an existing image.

B<mknimimage -t diskless -i 61cosi 61cosi_updt1>

3) Create a diskless image using an existing lpp_source resource named 61cosi_lpp_source and include the /tmp & /home resources.  This assumes that the mytmp and myhome NIM resources have already been created by using NIM commands.

B<mknimimage -t diskless -s 61cosi_lpp_source 611cosi tmp=mytmp home=myhome>


=head1 FILES

/opt/xcat/bin/mknimimage

=head1 NOTES

This command is part of the xCAT software product.

=head1 SEE ALSO 

rmnimimage(1) 


